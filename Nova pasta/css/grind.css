/* ==========================================================================
   12. HUB DE GRINDS (MENU DE SELEÇÃO) - V2 (ESTILO TÁTICO)
   ========================================================================== */
.grind-hub-container { 
    display: flex; 
    flex-direction: column; 
    gap: 10px; 
    padding-bottom: 40px; 
    width: 100%;
    max-width: 1600px; /* Garante que não estique demais em monitores wide */
    margin: 0 auto;
}

/* Painel de Controle Superior (Botão Novo) */
.hub-controls {
    display: flex;
    align-items: center;
    padding: 20px 0;
    margin-bottom: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.05); /* Divisória sutil no topo */
}

/* Botão de Ação Primária (Cyan Neon -> Dinâmico) */
.action-btn-primary { 
    background-color: var(--primary-color); 
    color: #050505; 
    border: none; 
    padding: 12px 28px; 
    border-radius: 6px; 
    font-family: var(--font-headings); 
    font-size: 0.95rem; 
    font-weight: 800; 
    cursor: pointer; 
    transition: all 0.2s ease; 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    text-transform: uppercase; 
    letter-spacing: 1px;
    /* Sombra dinâmica usando RGB */
    box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.2);
}

.action-btn-primary:hover { 
    filter: brightness(1.2); /* Aumenta o brilho em vez de mudar a cor fixa */
    transform: translateY(-2px); 
    box-shadow: 0 0 25px rgba(var(--primary-rgb), 0.4); 
}

.action-btn-primary i { 
    font-size: 1.1rem; 
}

/* Títulos das Reservas (Com linha conectora) */
.grind-reserve-header { 
    display: flex; 
    align-items: center; 
    gap: 15px; 
    margin: 30px 0 20px 0; 
    color: #fff;
    opacity: 0.9;
}

.grind-reserve-header i { 
    color: var(--primary-color); 
    font-size: 1.1rem; 
}

.grind-reserve-header span { 
    font-family: var(--font-headings); 
    font-size: 1.3rem; 
    text-transform: uppercase; 
    letter-spacing: 1px; 
    font-weight: bold;
    white-space: nowrap;
}

/* A Linha Elegante (Gradiente Dinâmico) */
.header-line { 
    flex-grow: 1; 
    height: 1px; 
    background: linear-gradient(90deg, rgba(var(--primary-rgb), 0.3), transparent); 
    margin-top: 4px;
}

/* Grid de Cards (Layout) */
.grinds-grid {
    display: grid;
    /* Mude 300px para 220px */
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); 
    gap: 15px; /* Gap reduzido de 25px para 15px */
    margin-bottom: 20px;
}

/* Estado Vazio (Empty State) */
.empty-state-container { 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px;
    background-color: rgba(255,255,255,0.02); 
    border: 1px dashed #333;
    border-radius: 12px; 
    margin-top: 20px;
}

.empty-icon-circle {
    width: 80px; height: 80px;
    background: rgba(0,0,0,0.3);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    margin-bottom: 20px;
    border: 1px solid #333;
}

.empty-icon-circle i { font-size: 2.5rem; color: #555; }

.empty-state-title {
    font-family: var(--font-headings);
    color: #fff;
    margin-bottom: 10px;
}

.empty-state-message {
    color: #777;
    max-width: 400px;
    text-align: center;
}

/* Card de Grind no Hub - V3 COMPACTO & ESCALÁVEL */
.grind-card { 
    position: relative;
    background-color: #0f1214;
    border: 1px solid #333; 
    border-bottom: 3px solid var(--primary-color); /* Linha mais fina */
    border-radius: 8px; /* Cantos levemente menos arredondados para visual mais técnico */
    padding: 15px; /* Padding reduzido drasticamente */
    overflow: hidden; 
    cursor: pointer; 
    transition: all 0.2s ease-out;
    display: flex; 
    flex-direction: column; 
    min-height: 220px; /* Altura reduzida (era 340px) */
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}

.grind-card:hover { 
    transform: translateY(-4px); 
    box-shadow: 0 10px 25px rgba(var(--primary-rgb), 0.15); /* Sombra dinâmica */
    border-color: #555;
    border-bottom-color: var(--primary-color); /* Borda dinâmica */
}

/* Camada 1: Imagem de Fundo (Ajustada para o tamanho menor) */
.grind-card-background {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none;
}

.grind-card-background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.25; /* Mais sutil para não poluir em tamanho pequeno */
    filter: grayscale(100%) contrast(1.2);
    transition: all 0.5s ease;
    mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0.1) 100%);
    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0.1) 100%);
}

.grind-card:hover .grind-card-background img {
    opacity: 0.4;
    transform: scale(1.05);
}

/* Camada 2: Overlay Gradiente */
.grind-card-overlay {
    display: none; /* Removido para deixar o fundo preto puro destacar o texto neon */
}
/* Camada 3: Conteúdo Compacto */
.grind-card-content { 
    position: relative; 
    z-index: 2; 
    display: flex; 
    flex-direction: column; 
    height: 100%; 
    gap: 5px; /* Gap mínimo */
}

/* Título Otimizado */
.grind-card-header { 
    width: 100%;
    text-align: center;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 8px;
    margin-bottom: 5px;
    min-height: 55px; /* Altura reservada menor */
    display: flex;
    align-items: center;
    justify-content: center;
}

.grind-card-title { 
    font-family: var(--font-headings); 
    font-size: 1.1rem; /* Fonte reduzida para caber melhor */
    line-height: 1.1;
    color: #fff; 
    margin: 0;
    text-transform: uppercase; 
    letter-spacing: 0.5px;
    font-weight: 700;
    text-shadow: 0 2px 5px rgba(0,0,0,1);
}

/* O Grande Número (Reescalonado) */
.grind-card-main-stat {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
}

.stat-value {
    font-family: var(--font-headings);
    font-size: 3.5rem;
    font-weight: bold;
    color: var(--primary-color);
    line-height: 1;
    text-shadow: 0 0 15px rgba(var(--primary-rgb), 0.4); /* Glow dinâmico */
}

.stat-label {
    font-size: 0.65rem;
    color: var(--primary-color);
    text-transform: uppercase;
    letter-spacing: 2px;
    font-weight: bold;
    opacity: 0.8;
    margin-top: 5px;
}

.stat-value.highlight-glow {
    font-family: var(--font-headings);
    font-size: 3.8rem; 
    font-weight: 800;
    color: #fff; 
    line-height: 1;
    text-shadow: 
        0 0 15px var(--primary-color),
        0 0 30px rgba(var(--primary-rgb), 0.4); /* Glow dinâmico */
    transition: all 0.3s ease;
    margin-bottom: 0;
}

.grind-card:hover .stat-value.highlight-glow {
    text-shadow: 
        0 0 20px var(--primary-color),
        0 0 40px rgba(var(--primary-rgb), 0.6); /* Glow intenso dinâmico */
}
/* Rodapé com Stats Secundários */
.grind-card-stats-row { 
    display: grid; 
    grid-template-columns: repeat(3, 1fr); 
    gap: 8px; 
    background: rgba(0,0,0,0.6);
    border-radius: 8px;
    padding: 8px 5px;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.stat-item { 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
}

.stat-icon { 
    width: 22px; 
    height: 22px; 
    margin-bottom: 2px;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.8));
}

.stat-count { 
    font-size: 0.95rem; 
    font-weight: bold; 
    color: #fff;
    font-family: var(--font-headings);
}
/* Rodapé Minimalista */
.grind-card-footer {
    width: 100%;
    text-align: center;
    margin-top: auto;
}

.last-activity {
    font-size: 0.6rem;
    color: #777;
    font-family: monospace;
    text-transform: uppercase;
    /* Remover background box para limpar visual em escala pequena */
    background: transparent; 
    padding: 0;
    border: none;
}

/* ==========================================================================
   13. CONTADOR DE GRIND (PÁGINA DETALHADA / ATIVA)
   ========================================================================== */
.grind-container { 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    gap: 30px; 
}

.grind-header-details { 
    display: flex; 
    flex-wrap: wrap; 
    justify-content: center; 
    align-items: center; 
    gap: 25px; 
    margin-top: 20px; 
    padding: 15px; 
    background-color: rgba(0, 0, 0, 0.2); 
    border-radius: 8px; 
    width: 100%; 
    max-width: 1200px; 
}

.detail-item { 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    font-size: 1rem; 
    color: var(--text-color-muted); 
}

.detail-item strong { 
    font-family: var(--font-headings); 
    color: var(--text-color); 
    font-size: 1.1rem; 
}

.detail-item i { 
    color: var(--primary-color); 
    font-size: 1.2rem; 
}

/* Botão de Hotspot */
.hotspot-button { 
    background-color: var(--border-color); 
    color: var(--text-color); 
    border: none; 
    padding: 8px 15px; 
    border-radius: 5px; 
    cursor: pointer; 
    font-family: var(--font-headings); 
    font-size: 0.9rem; 
    transition: all 0.2s ease; 
}

.hotspot-button:hover { 
    background-color: var(--primary-color); 
    color: #111; 
}

.hotspot-button i { margin-right: 8px; }

/* Grid de Contadores (+/-) */
.counters-wrapper { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
    gap: 20px; 
    width: 100%; 
    max-width: 1200px; 
}

.grind-counter-item { 
    background-color: var(--surface-color); 
    border: 1px solid var(--border-color); 
    border-radius: 8px; 
    padding: 15px; 
    text-align: center; 
}

/* Item de Total (Destaque Escuro) */
.grind-counter-item.total-kills { 
    grid-column: 1 / -1; 
    background-color: var(--bg-color); /* Usando a cor de fundo do tema */
    border: 1px solid var(--primary-color); /* Borda destaque */
}

.grind-counter-header { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: 10px; 
    font-family: var(--font-headings); 
    font-size: 1.2rem; 
    color: var(--text-color-muted); 
    margin-bottom: 15px; 
}

.grind-counter-header .custom-icon { 
    width: 4rem; 
    height: 4rem; 
    margin-right: 0; 
}

.grind-counter-body { 
    background-color: rgba(0,0,0,0.2); 
    border-radius: 6px; 
    padding: 10px; 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
}

.grind-counter-value { 
    font-size: 2.2rem; 
    font-weight: bold; 
    font-family: var(--font-headings); 
    flex-grow: 1; 
    cursor: pointer; 
}

/* Botões Circulares de + e - */
.grind-counter-btn { 
    background-color: var(--border-color); 
    color: var(--text-color); 
    border: none; 
    width: 40px; 
    height: 40px; 
    border-radius: 50%; 
    font-size: 1.2rem; 
    cursor: pointer; 
    transition: all 0.2s ease; 
}

.grind-counter-btn.increase:hover { 
    background-color: var(--primary-color); 
    color: #111; 
}

.grind-counter-btn.decrease:hover { 
    background-color: var(--secondary-color); 
    color: #fff; 
}

/* Input Manual de Edição */
.grind-total-input { 
    width: auto; 
    flex-grow: 1; 
    font-size: 2.2rem; 
    text-align: center; 
    background-color: var(--bg-color); 
    border: 1px solid var(--primary-color); 
    color: var(--text-color); 
    border-radius: 4px; 
    font-family: var(--font-headings); 
    padding: 0; 
    margin: 0 10px; 
}

.grind-total-input:focus { outline: none; }

/* Botão de Excluir Grind */
#delete-grind-btn { 
    background-color: var(--secondary-color); 
    border-color: var(--secondary-color); 
    margin-top: 20px; 
    align-self: center; 
}

#delete-grind-btn:hover { 
    background-color: #c9302c; 
    border-color: #ac2925; 
    color: #fff; 
}

/* ==========================================================================
   27. ZONE MANAGER V4: CENTRAL DE COMANDO (LISTAS & UI)
   ========================================================================== */

.zone-manager-container {
    background: #151515; border: 1px solid #333; border-radius: 12px;
    margin-top: 20px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}

.zm-header {
    background: #202020; padding: 15px 20px; display: flex; justify-content: space-between;
    align-items: center; border-bottom: 1px solid #333; cursor: pointer;
}

.zm-title { margin: 0; font-size: 1.2rem; color: #fff; display: flex; align-items: center; gap: 10px; font-family: var(--font-headings); }

.zm-btn-icon {
    background: #333; border: 1px solid #444; color: #aaa; width: 35px; height: 35px;
    border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
}

.zm-btn-icon:hover { background: #444; color: #fff; }
.zm-btn-icon.active { background: var(--primary-color); color: #000; border-color: var(--primary-color); }

.zm-body { padding: 20px; background: #121212; }

/* Grid de Lista de Zonas */
.zm-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 10px; }

/* --- ELEMENTOS DE LISTA REUTILIZÁVEIS --- */
/* (Filtros, Inputs e Cards de Zona ficam aqui se não estiverem em outra seção global) */
.zm-dashboard-filters { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.filter-btn { flex: 1; background: #1e1e1e; border: 1px solid #333; padding: 10px; border-radius: 8px; color: #888; cursor: pointer; text-align: center; }
.filter-btn.active { border-color: var(--primary-color); background: rgba(255,255,255,0.05); color: #fff; }

/* Barra de Adição Simples */
.zm-add-bar { display: flex; gap: 10px; margin-bottom: 20px; }
.zm-input { background: #121212; border: 1px solid #444; color: #fff; padding: 8px; border-radius: 4px; flex: 1; outline: none; }
.zm-btn-add { background: var(--primary-color); color: #000; border: none; padding: 0 20px; border-radius: 4px; font-weight: bold; cursor: pointer; text-transform: uppercase; }


/* ==========================================================================
   31. MODAL DE DETALHES DO GRIND (SELEÇÃO DE PELAGENS)
   ========================================================================== */

.grind-detail-modal-content {
    max-width: 700px;
}

.grind-detail-modal-content h3 {
    font-family: var(--font-headings);
    text-align: center;
    margin-bottom: 5px;
    font-size: 1.6rem;
}

.grind-detail-modal-content p {
    text-align: center;
    color: var(--text-color-muted);
    margin-bottom: 20px;
}

/* Grid de seleção de imagens (Pelagens) */
.fur-selection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 10px;
    max-height: 40vh; /* Limita a altura para não estourar a tela */
    overflow-y: auto;
    padding: 10px;
    background-color: rgba(0,0,0,0.2);
    border-radius: 6px;
}

/* Card de Seleção Individual */
.fur-selection-card {
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.fur-selection-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-3px);
    box-shadow: 0 4px 15px rgba(0, 188, 212, 0.2);
}

.fur-selection-card img {
    width: 100%;
    height: 80px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: 8px;
}

.fur-selection-card span {
    font-size: 0.8rem;
    font-weight: bold;
    display: block; /* Garante que o texto quebre linha se necessário */
}

/* Botões do Modal */
.grind-detail-modal-content .modal-buttons {
    margin-top: 20px;
    display: flex;
    justify-content: flex-end;
}


/* ==========================================================================
   36. STATUS DE ZONAS E EFEITOS VISUAIS DE GRIND
   ========================================================================== */

/* --- Status do Gerenciador de Zonas --- */
.zone-status-btn { 
    padding: 4px 8px; 
    border-radius: 4px; 
    font-size: 0.75rem; 
    font-weight: bold; 
    cursor: pointer; 
    border: none; 
    text-transform: uppercase; 
    margin-left: 10px;
    transition: 0.2s;
}

.zone-status-btn:hover { transform: scale(1.05); }

/* Cores Específicas dos Status */
.status-active { 
    background: #00e676; 
    color: #000; 
    box-shadow: 0 0 8px rgba(0,230,118,0.4); 
}

.status-stacking { 
    background: #ffea00; 
    color: #000; 
    box-shadow: 0 0 8px rgba(255,234,0,0.4); 
}

.status-solo { 
    background: #ff3d00; 
    color: white; 
    opacity: 0.9; 
    box-shadow: 0 0 8px rgba(255, 61, 0, 0.4);
}

/* --- Efeitos de Glow (Brilho) no Contador de Grind --- */
.grind-counter-card { 
    transition: all 0.3s ease; 
    border: 1px solid transparent; 
}

/* Great One - Dourado Escuro */
.grind-counter-card.type-great-one.active-glow {
    border-color: var(--gold-color);
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.15);
    background: linear-gradient(145deg, #222, #3a3210);
}

/* Diamante - Ciano Neon */
.grind-counter-card.type-diamond.active-glow {
    border-color: var(--primary-color);
    box-shadow: 0 0 15px rgba(0, 229, 255, 0.15);
    background: linear-gradient(145deg, #222, #103a3a);
}

/* Super Raro - Magenta */
.grind-counter-card.type-super-rare.active-glow {
    border-color: #ff00ff;
    box-shadow: 0 0 15px rgba(255, 0, 255, 0.15);
}

/* Raros - Laranja */
.grind-counter-card.type-rare.active-glow {
    border-color: #ffaa00;
    box-shadow: 0 0 10px rgba(255, 170, 0, 0.1);
}


/* ==========================================================================
   37. MODAL DE SELEÇÃO DE PELAGEM (LAYOUT V2)
   ========================================================================== */

.modal-header-simple { 
    text-align: center; 
    margin-bottom: 20px; 
    border-bottom: 1px solid #333; 
    padding-bottom: 10px; 
}

.grind-select-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); 
    gap: 15px; 
    max-height: 500px; 
    overflow-y: auto; 
    padding: 10px; 
}

.grind-option-card { 
    background: #1e1e1e; 
    border: 1px solid #333; 
    border-radius: 8px; 
    overflow: hidden; 
    cursor: pointer; 
    transition: 0.2s; 
    position: relative; 
}

.grind-option-card:hover { 
    transform: translateY(-3px); 
    border-color: var(--primary-color); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.5); 
}

.grind-opt-img { 
    height: 110px; 
    width: 100%; 
    background: #111; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
}

.grind-opt-img img { 
    max-width: 90%; 
    max-height: 90%; 
    object-fit: contain; 
}

.grind-opt-name { 
    padding: 10px; 
    text-align: center; 
    font-size: 0.85rem; 
    color: #eee; 
    background: #252525; 
    min-height: 50px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    line-height: 1.2; 
}

/* ==========================================================================
   41. GRIND HUD V2: PAINEL TÁTICO & INFORMATIVO
   ========================================================================== */

.grind-hud-card {
    background-color: #1e1e1e;
    border-radius: 12px;
    border: 1px solid #333;
    overflow: hidden;
    position: relative;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    margin-bottom: 25px;
}

/* Header com Imagem de Fundo (Overlay) */
.hud-background {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0.1; 
    z-index: 0;
    filter: grayscale(100%);
}

.hud-content { 
    position: relative; 
    z-index: 2; 
    padding: 20px; 
}

/* Título e Subtítulo */
.hud-header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 15px;
    margin-bottom: 15px;
}

.hud-animal-name {
    font-family: var(--font-headings);
    font-size: 2rem;
    color: #fff;
    margin: 0;
    line-height: 1;
    text-transform: uppercase;
}

.hud-reserve-name {
    color: var(--primary-color);
    font-size: 0.8rem;
    letter-spacing: 1px;
    font-weight: bold;
}

/* BARRA DE INFORMAÇÕES (INTEL) */
.hud-intel-bar {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 5px;
    background: rgba(0,0,0,0.3);
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid rgba(255,255,255,0.05);
}

.intel-item {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.intel-icon { font-size: 1rem; color: var(--primary-color); margin-bottom: 4px; }
.intel-label { font-size: 0.6rem; color: #888; text-transform: uppercase; }
.intel-value { font-size: 0.9rem; color: #fff; font-weight: bold; }
/* CONTADOR PRINCIPAL (COM CONTROLE +/-) */
.main-control-panel {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(var(--primary-rgb), 0.05); /* Fundo dinâmico sutil */
    border: 1px solid rgba(var(--primary-rgb), 0.2); /* Borda dinâmica sutil */
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 25px;
}

.btn-control {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex; align-items: center; justify-content: center;
    color: #fff;
    box-shadow: 0 4px 0 rgba(0,0,0,0.3);
}

.btn-control:active { transform: translateY(4px); box-shadow: none; }
.btn-minus { background: #37474f; color: #ff5252; }
.btn-plus { background: var(--primary-color); color: #000; font-size: 2rem; }

.counter-display-wrapper {
    text-align: center;
    flex-grow: 1;
}

.counter-big-number {
    font-family: var(--font-headings); /* Usando fonte global em vez de Oswald hardcoded */
    font-size: 4rem;
    font-weight: bold;
    color: #fff;
    line-height: 1;
    text-shadow: 0 0 15px rgba(0, 188, 212, 0.4);
}

.counter-label { color: var(--text-color-muted); font-size: 0.8rem; letter-spacing: 2px; text-transform: uppercase; }

/* GRID DE ESPECIAIS (Botões coloridos) */
.specials-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-bottom: 20px;
}

.special-btn {
    display: flex;
    align-items: center;
    justify-content: space-between; /* Texto na esq, numero na dir */
    padding: 15px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    background: #2c2f33;
    color: #fff;
    cursor: pointer;
    transition: transform 0.2s;
}

.special-btn:active { transform: scale(0.98); }

.special-info { display: flex; align-items: center; gap: 10px; font-weight: bold; font-family: var(--font-headings); }

.special-count { 
    background: rgba(0,0,0,0.4); 
    padding: 2px 8px; 
    border-radius: 4px; 
    font-size: 0.9rem;
    color: #fff;
}

/* Cores específicas de Cards Especiais */
.sp-dia { border-left: 4px solid #00e5ff; }
.sp-dia i { color: #00e5ff; }

.sp-rare { border-left: 4px solid var(--gold-color); }
.sp-rare i { color: var(--gold-color); }

.sp-troll { border-left: 4px solid #a385ff; }
.sp-troll i { color: #a385ff; }

.sp-go { border-left: 4px solid #ffeb3b; background: linear-gradient(90deg, #2c2f33, #3e3a22); }
.sp-go i { color: #ffeb3b; }

/* Barra de Probabilidade (Slim) */
.prob-container-slim {
    width: 100%;
    height: 4px;
    background: #111;
    margin-top: 10px;
    border-radius: 2px;
    overflow: hidden;
}

.prob-fill-slim { height: 100%; background: var(--primary-color); }
.prob-text { font-size: 0.7rem; color: #666; text-align: center; margin-top: 5px; }

/* Responsividade do HUD */
@media (max-width: 400px) {
    .hud-intel-bar { grid-template-columns: repeat(3, 1fr); } /* Quebra em linhas no cel pequeno */
    .intel-item { margin-bottom: 10px; }
    .counter-big-number { font-size: 3rem; }
    .btn-control { width: 50px; height: 50px; }
}


/* ==========================================================================
   42. GRIND HUD V5.1: HEADER VISÍVEL, HUD TÁTICO & GRID (ATUALIZADO)
   ========================================================================== */

/* Container Principal */
.grind-v3-card {
    background: #181818;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    border: 1px solid #333;
    margin-bottom: 30px;
}

/* --- 1. HEADER V5.1 (IMAGEM E HUD) --- */
.v3-header {
    height: 260px; /* Mais alto para caber o HUD inferior */
    position: relative;
    background-size: cover;
    background-position: center;
}

/* Overlay Escuro Superior (Para Título e Tag) */
.v3-overlay-top {
    position: absolute; top: 0; left: 0; right: 0;
    height: 60%; /* Ocupa a metade de cima */
    background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.v3-animal-name {
    font-family: var(--font-headings);
    font-size: 2.2rem;
    color: #fff;
    text-transform: uppercase;
    text-shadow: 0 2px 10px rgba(0,0,0,1);
    line-height: 1;
    margin: 0;
}

.v3-reserve-tag {
    background: var(--primary-color);
    color: #000;
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: bold;
    font-size: 0.75rem;
    text-transform: uppercase;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

/* --- 2. BARRA DE INFORMAÇÕES (HUD INFERIOR - NOVO) --- */
.v3-stats-bar-container {
    position: absolute;
    bottom: 15px;
    left: 15px;
    right: 15px;
    background: rgba(20, 20, 20, 0.95); /* Fundo quase sólido para leitura */
    border-radius: 12px;
    padding: 12px;
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 Colunas Iguais */
    gap: 5px;
}

/* Cada Caixa de Informação do HUD */
.hud-info-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    border-right: 1px solid rgba(255,255,255,0.1); /* Divisória */
}

.hud-info-box:last-child { border-right: none; }

.hud-label {
    font-size: 0.65rem;
    color: #888;
    text-transform: uppercase;
    margin-bottom: 2px;
    font-weight: bold;
    letter-spacing: 1px;
}

.hud-value {
    color: #fff;
    font-weight: bold;
    font-size: 0.9rem;
    font-family: var(--font-body);
}

.hud-icon {
    font-size: 1rem;
    margin-bottom: 4px;
    color: var(--primary-color);
}

/* Cores Específicas para os Ícones do HUD */
.icon-time { color: #00e5ff; }    /* Azul Ciano */
.icon-class { color: #ff5252; }   /* Vermelho */
.icon-weight { color: #ccc; }     /* Prata */
.icon-score { color: #ffd700; }   /* Dourado */

/* --- 3. CONTROLE CENTRAL (TOTAL ABATES) --- */
.v3-counter-deck {
    padding: 20px;
    background: #202020;
    border-bottom: 1px solid #333;
    display: flex; align-items: center; justify-content: space-between; gap: 15px;
}

.v3-display-box {
    flex-grow: 1; text-align: center; background: #121212;
    padding: 10px; border-radius: 10px; border: 1px solid #333;
    box-shadow: inset 0 0 15px #000;
}

/* O Número Gigante (Input) */
.v3-input-number {
    font-family: var(--font-headings, sans-serif);
    font-size: 4rem !important; 
    color: var(--primary-color) !important;
    background: transparent;
    border: none;
    text-align: center;
    width: 100%;
    outline: none;
    text-shadow: 0 0 15px rgba(var(--primary-rgb), 0.3); /* Glow dinâmico */
    padding: 0;
    margin: 0;
    line-height: 1.1;
    -moz-appearance: textfield; 
}

.v3-input-number::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

.v3-sub-label { font-size: 0.7rem; color: #666; text-transform: uppercase; letter-spacing: 2px; margin-top: -5px; }

/* Botões Grandes (+ / -) */
.btn-circle-action {
    width: 50px; height: 50px; border-radius: 50%; border: none; font-size: 1.5rem;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: transform 0.1s; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

.btn-circle-action:active { transform: scale(0.95); }

.act-minus { background: #2a2a2a; color: #ff5252; border: 1px solid #444; }
.act-plus {
    background: var(--primary-color);
    color: #000;
    box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.3); /* Glow dinâmico */
}

/* --- 4. GRID DE CONTROLES ESPECIAIS (2 COLUNAS - V5) --- */
.v5-specials-grid {
    padding: 15px;
    display: grid;
    grid-template-columns: 1fr 1fr; /* 2 Colunas Iguais */
    gap: 12px;
}

/* O Cartão (Tile) */
.v5-control-tile {
    background: #252525;
    border: 1px solid #333;
    border-radius: 12px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

/* Ícone e Título */
.v5-tile-header {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    justify-content: center;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    padding-bottom: 5px;
    margin-bottom: 2px;
}

.v5-icon-img {
    width: 28px; height: 28px;
    object-fit: contain;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5));
}

.v5-label {
    font-family: var(--font-headings);
    font-size: 0.9rem;
    color: #ccc;
    text-transform: uppercase;
    font-weight: bold;
}

/* Área de Botões e Input */
.v5-tile-controls {
    display: flex;
    align-items: center;
    gap: 5px;
    width: 100%;
    justify-content: space-between;
    background: #181818;
    border-radius: 20px;
    padding: 3px;
    border: 1px solid #333;
}

.btn-tile {
    width: 30px; height: 30px;
    border-radius: 50%; border: none; cursor: pointer;
    font-size: 0.9rem; display: flex; align-items: center; justify-content: center;
}

.btn-tile.minus { background: #222; color: #ff5252; }
.btn-tile.plus { background: var(--primary-color); color: #000; }

.input-tile {
    width: 40px;
    background: transparent; border: none;
    color: #fff; text-align: center;
    font-family: var(--font-headings); font-size: 1.2rem;
    outline: none; -moz-appearance: textfield;
}

/* Cores de Identificação (Borda Inferior) */
.tile-dia { border-bottom: 3px solid #00e5ff; }
.tile-rare { border-bottom: 3px solid #ffd700; }
.tile-super { border-bottom: 3px solid #e040fb; }
.tile-go { border-bottom: 3px solid #ffeb3b; background: linear-gradient(135deg, #252525, #353220); }
.tile-troll { border-bottom: 3px solid #a385ff; }

/* Rodapé */
.v4-footer-actions {
    display: flex; gap: 10px; padding: 0 20px 20px 20px;
}

/* Responsivo para telas muito pequenas */
@media (max-width: 400px) {
    .v3-stats-bar-container { grid-template-columns: 1fr 1fr; gap: 10px; } /* 2 linhas de 2 */
    .hud-info-box { border-right: none; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 5px; }
}



/* ==========================================================================
   55. AJUSTES FINAIS: MODO COMPACTO E MODAL OTIMIZADO
   ========================================================================== */

/* --- CORREÇÃO DE TAMANHO DO CARD DE GRIND --- */
/* Força o card a ter uma largura controlada */
.grind-v3-card {
    width: 100%;
    max-width: 600px; /* Isso impede que fique GIGANTE em monitores grandes */
    margin: 20px auto; /* Centraliza na tela */
    background: #181818;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    border: 1px solid #333;
}

/* Ajuste dos Grids para telas pequenas */
.v5-specials-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 2 colunas lado a lado */
    gap: 10px;
    padding: 15px;
}

/* Garante que o mapa respeite a largura do pai */
.zone-manager-container {
    width: 100%;
    border-top: 1px solid #333;
}

.tactical-map-wrapper {
    height: 50vh; /* Altura controlada do mapa */
    border-radius: 8px;
}

/* Header mais compacto */
.v3-header {
    height: 180px; /* Menor altura para economizar espaço */
}

.v3-animal-name {
    font-size: 1.5rem; /* Fonte menor */
    margin-top: 10px;
}

/* --- MODAL DE ZONA COMPACTO (FIX DE TAMANHO) --- */
.pin-creation-modal {
    position: absolute;
    background: rgba(25, 25, 25, 0.98); /* Levemente transparente */
    border: 1px solid var(--primary-color);
    padding: 10px; /* Reduzido de 15px */
    border-radius: 8px;
    display: flex; flex-direction: column; gap: 8px; /* Gap reduzido */
    box-shadow: 0 10px 40px rgba(0,0,0,1);
    z-index: 300;
    width: 240px; /* Mais estreito (era 280px) */
    backdrop-filter: blur(5px);
}

.pcm-header {
    border-bottom: 1px solid #333; padding-bottom: 5px; margin-bottom: 0;
    font-family: var(--font-headings); color: var(--primary-color); 
    font-size: 0.9rem; /* Fonte menor */
    text-transform: uppercase; letter-spacing: 1px;
}

.pcm-input-group label {
    display: block; font-size: 0.65rem; color: #888; margin-bottom: 2px; text-transform: uppercase;
}

/* Botões de Seleção (Solo/Rebanho) Compactos */
.pcm-select-buttons { display: flex; gap: 4px; margin-bottom: 0; }

.pcm-btn-option {
    flex: 1; background: #111; border: 1px solid #444; color: #888;
    padding: 4px 0; /* Padding vertical menor */
    border-radius: 4px; cursor: pointer; font-size: 0.7rem; /* Fonte menor */
    transition: all 0.2s; text-align: center;
}

.pcm-btn-option:hover { background: #222; color: #fff; }

.pcm-btn-option.selected {
    background: var(--primary-color); color: #000; border-color: var(--primary-color); font-weight: bold;
}

/* Inputs Numéricos (Linha única) */
.pcm-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }

.pcm-input {
    width: 100%; background: #0a0a0a; border: 1px solid #333; color: #fff;
    padding: 4px 8px; border-radius: 4px; font-size: 0.85rem;
}

.pcm-input:focus { border-color: var(--primary-color); outline: none; }

/* Textarea menor */
textarea.pcm-input { 
    resize: none; 
    height: 40px; /* Altura fixa pequena */
    font-family: sans-serif; 
}

/* Botões de Ação (Salvar/Cancelar) */
.pcm-actions { display: flex; gap: 6px; margin-top: 5px; }

.rp-btn {
    flex: 1; border: 1px solid transparent; border-radius: 4px; 
    padding: 6px 0; font-size: 0.75rem; font-weight: bold; cursor: pointer; text-transform: uppercase;
}

/* ==========================================================================
   58. CORREÇÃO DEFINITIVA: CONTADOR DE GRIND (HUD V3/V5)
   ========================================================================== */

/* 1. O CARTÃO PRINCIPAL (Container Geral) */
.grind-v3-card {
    background: #181818;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    border: 1px solid #333;
    margin: 0 auto 30px auto;
    max-width: 600px; /* Limita a largura para não ficar gigante no PC */
    width: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
}

/* 2. ÁREA DO CONTADOR CENTRAL (Onde fica o número grande) */
.v3-counter-deck {
    padding: 25px 20px;
    background: #1e1e1e; /* Cor de fundo do painel central */
    border-top: 1px solid #333;
    border-bottom: 1px solid #333;
    display: flex;
    align-items: center;
    justify-content: space-between; /* Espalha: Botão - Número - Botão */
    gap: 15px;
}

/* A Caixa do Número */
.v3-display-box {
    flex-grow: 1;
    background: #0b0b0b;
    border-radius: 12px;
    padding: 10px;
    border: 1px solid #333;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.8); /* Efeito de profundidade */
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* O Número Gigante (Input) */
.v3-input-number {
    font-family: var(--font-headings, sans-serif);
    font-size: 4rem !important; /* Força o tamanho grande */
    color: var(--primary-color) !important;
    background: transparent;
    border: none;
    text-align: center;
    width: 100%;
    outline: none;
    text-shadow: 0 0 15px rgba(0, 188, 212, 0.3);
    padding: 0;
    margin: 0;
    line-height: 1.1;
    -moz-appearance: textfield; /* Remove setinhas no Firefox */
}

/* Remove setinhas no Chrome/Safari */
.v3-input-number::-webkit-outer-spin-button,
.v3-input-number::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* Subtítulo ("Abates Totais") */
.v3-sub-label {
    color: #666;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-top: 5px;
}

/* 3. OS BOTÕES REDONDOS (+ e -) */
.btn-circle-action {
    width: 60px !important;
    height: 60px !important;
    border-radius: 50%;
    border: none;
    font-size: 1.8rem;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s, box-shadow 0.2s;
    flex-shrink: 0; /* Impede o botão de amassar */
}

/* Botão de Menos: Agora segue a cor do tema (Borda e Ícone) */
.act-minus {
    background: rgba(0, 0, 0, 0.4); /* Fundo escuro sutil */
    color: var(--primary-color);    /* Ícone na cor do tema */
    border: 2px solid var(--primary-color); /* Borda na cor do tema */
    transition: all 0.2s ease;
}
/* Hover: Preenche com a cor do tema (Igual ao comportamento esperado de botões ativos) */
.act-minus:hover {
    background: var(--primary-color);
    color: #000; /* Texto preto para contraste */
    box-shadow: 0 0 15px var(--primary-color); /* Brilho neon na cor do tema */
    transform: scale(1.05);
}
/* Mantemos o botão de Mais como referência sólida */
.act-plus {
    background: var(--primary-color);
    color: #000;
    box-shadow: 0 0 15px var(--primary-color); /* Corrigido para usar a variável no glow também */
    border: 2px solid var(--primary-color);
}

.btn-circle-action:active {
    transform: scale(0.95);
}

/* 4. A GRADE DE BOTÕES (Diamante, Raros, etc) */
.v5-specials-grid {
    padding: 20px;
    display: grid;
    grid-template-columns: 1fr 1fr; /* 2 colunas */
    gap: 15px;
    background: #181818;
}

/* Card Individual (Ex: Diamante) */
.v5-control-tile {
    background: #252525;
    border: 1px solid #333;
    border-radius: 10px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.v5-label {
    font-size: 0.9rem;
    font-weight: bold;
    color: #ccc;
    text-transform: uppercase;
}

/* Controles dentro do card ( - 0 + ) */
.v5-tile-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    background: #121212;
    padding: 4px;
    border-radius: 20px;
    border: 1px solid #333;
}

.btn-tile {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: none;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}
/* Botão Tile Menos: Estilo Outline com cor do tema */
.btn-tile.minus { 
    background: transparent; 
    color: var(--primary-color); 
    border: 1px solid var(--primary-color);
    transition: all 0.2s ease;
}

/* Hover Tile Menos: Preenchimento */
.btn-tile.minus:hover {
    background: var(--primary-color);
    color: #000;
    box-shadow: 0 0 8px var(--primary-color);
}
/* Ajuste no botão de Mais para garantir consistência */
.btn-tile.plus { 
    background: var(--primary-color); 
    color: #000; 
    border: 1px solid var(--primary-color);
}

.input-tile {
    width: 40px;
    background: transparent;
    border: none;
    color: #fff;
    text-align: center;
    font-size: 1.1rem;
    font-weight: bold;
}

/* 5. RESPONSIVIDADE (Para Celular) */
@media (max-width: 480px) {
    .v3-counter-deck {
        gap: 10px;
        padding: 15px 10px;
    }
    
    .v3-input-number {
        font-size: 3rem !important; /* Um pouco menor no celular */
    }
    
    .btn-circle-action {
        width: 50px !important;
        height: 50px !important;
    }
    
    .v5-specials-grid {
        gap: 10px;
        padding: 15px;
    }
}

/* ==========================================================================
   ESTILIZAÇÃO DE ALERTAS E MODAIS (GLOBAL)
   Transforma os botões padrão em botões táticos
   ========================================================================== */

/* 1. Reset e Base para TODOS os botões dentro de modais/alertas */
/* Nota: Seletores abrangentes para garantir que pegue o alerta customizado */
.modal-overlay button,
.modal-content-box button,
.custom-alert-overlay button, 
div[style*="z-index"] > div > button { /* Fallback para containers genéricos */
    border: none;
    outline: none;
    padding: 12px 28px;
    border-radius: 6px;
    font-family: var(--font-headings);
    font-weight: 800; /* Extra bold */
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
    min-width: 100px;
    margin: 10px 5px 0 5px; /* Espaçamento entre eles */
}
/* 2. BOTÃO PRIMÁRIO (OK / CONFIRMAR) */
.modal-overlay button:last-child,
.modal-content-box button:last-child,
.custom-alert-overlay button:last-child,
div[style*="z-index"] > div > button:last-child {
    background-color: var(--primary-color);
    color: #050505; 
    box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.2); /* Sombra dinâmica */
}

.modal-overlay button:last-child:hover,
.modal-content-box button:last-child:hover,
.custom-alert-overlay button:last-child:hover,
div[style*="z-index"] > div > button:last-child:hover {
    background-color: var(--primary-color);
    filter: brightness(1.2); /* Brilho via filtro */
    transform: translateY(-2px);
    box-shadow: 0 0 25px rgba(var(--primary-rgb), 0.5); /* Sombra intensa dinâmica */
}

/* 3. BOTÃO SECUNDÁRIO (CANCELAR) */
/* Lógica: Qualquer botão que NÃO seja o último é secundário */
.modal-overlay button:not(:last-child),
.modal-content-box button:not(:last-child),
.custom-alert-overlay button:not(:last-child),
div[style*="z-index"] > div > button:not(:last-child) {
    background-color: transparent;
    border: 1px solid #444;
    color: #aaa;
}

.modal-overlay button:not(:last-child):hover,
.modal-content-box button:not(:last-child):hover,
.custom-alert-overlay button:not(:last-child):hover,
div[style*="z-index"] > div > button:not(:last-child):hover {
    border-color: #fff;
    color: #fff;
    background-color: rgba(255, 255, 255, 0.05);
}

/* Ajuste Fino para o Container do Alerta (para garantir fundo escuro e borda) */
.custom-alert-box, 
.modal-content-box {
    background-color: #121212 !important; /* Força fundo escuro */
    border: 1px solid #333 !important;
    border-radius: 12px !important;
    box-shadow: 0 20px 50px rgba(0,0,0,0.8) !important;
}

/* ==========================================================================
   59. LAYOUT TELA CHEIA (FULLSCREEN MAP) - NOVO
   ========================================================================== */

/* Remove padding do container principal quando em modo tela cheia */
.main-content.full-screen-mode {
    padding: 0 !important;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Impede scroll da página inteira */
}

.main-content.full-screen-mode .page-header {
    margin-bottom: 0 !important;
    padding: 10px 20px !important;
    background: #111 !important;
    flex-shrink: 0; /* Header não encolhe */
    border-bottom: 1px solid #333 !important;
    z-index: 50;
}

.main-content.full-screen-mode .content-container {
    flex-grow: 1;
    height: calc(100vh - 60px); /* Restante da altura menos o header */
    padding: 0 !important;
    width: 100%;
}

/* Container Flex do Layout */
.tactical-fullscreen-layout {
    display: flex;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

/* Área do Mapa (Esquerda - Flex Grow) */
.tactical-map-area {
    flex-grow: 1;
    position: relative;
    background-color: #050505;
    overflow: hidden;
    height: 100%;
}

/* Força o wrapper do mapa a preencher tudo sem bordas */
.tactical-map-area .tactical-map-wrapper {
    width: 100% !important;
    height: 100% !important;
    border: none !important;
    border-radius: 0 !important;
    margin: 0 !important;
    box-shadow: none !important;
}

.tactical-map-area .zone-manager-container {
    border: none !important;
    margin: 0 !important;
    width: 100% !important;
    height: 100% !important;
}

/* Barra Lateral (Direita - Fixa) */
.tactical-sidebar {
    width: 320px;
    background-color: #1a1a1a;
    border-left: 1px solid #333;
    display: flex;
    flex-direction: column;
    transition: width 0.3s ease;
    z-index: 20;
    flex-shrink: 0;
}

.tactical-sidebar.collapsed {
    width: 0;
    border: none;
    overflow: hidden;
}

/* Header da Sidebar */
.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background-color: #222;
    border-bottom: 1px solid #333;
}

.sidebar-header h3 {
    font-family: var(--font-headings);
    color: var(--primary-color);
    font-size: 1.1rem;
    margin: 0;
    text-transform: uppercase;
}

.sidebar-close-btn {
    background: none;
    border: none;
    color: #888;
    cursor: pointer;
    font-size: 1rem;
}

.sidebar-close-btn:hover { color: #fff; }

/* Conteúdo da Sidebar */
.sidebar-content {
    padding: 15px;
    overflow-y: auto;
    flex-grow: 1;
}

.sidebar-item {
    padding: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    cursor: pointer;
    transition: background 0.2s;
}

.sidebar-item:hover {
    background-color: rgba(255,255,255,0.05);
}

.sb-label {
    color: #ccc;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.sb-label i { width: 20px; text-align: center; color: var(--primary-color); }

/* ==========================================================================
   63. ESTILOS DA SIDEBAR DE DICAS E SELEÇÃO
   ========================================================================== */

/* Grupo de Instruções na Sidebar */
.sidebar-instruction-group {
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.sig-title {
    color: var(--primary-color);
    font-weight: bold;
    font-size: 0.95rem;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    text-transform: uppercase;
}

.sig-text {
    color: #aaa;
    font-size: 0.85rem;
    line-height: 1.5;
}

.sig-text strong {
    color: #fff;
    font-weight: 700;
}
/* ==========================================================================
   64. SIDEBAR DE EDIÇÃO (ESQUERDA) E FORMULÁRIOS
   ========================================================================== */

/* Configuração da Sidebar Esquerda (Espelho da Direita) */
.tactical-sidebar-left {
    width: 0; /* Começa fechada */
    background-color: #1a1a1a;
    border-right: 1px solid #333;
    display: flex;
    flex-direction: column; /* Organiza Header e Form em coluna */
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 30;
    flex-shrink: 0;
    height: 100%; /* Garante altura total */
    overflow: hidden; /* Mantém hidden no container pai para a transição de largura */
    white-space: nowrap; 
}

.tactical-sidebar-left.open {
    width: 320px; /* Largura levemente aumentada para conforto */
}
/* Header da Sidebar (Fixo no topo) */
.tactical-sidebar-left .sidebar-header {
    flex-shrink: 0; /* Não encolhe */
    background-color: #222;
    z-index: 2;
    border-bottom: 1px solid #333;
}
/* Container do Formulário (Rolagem Vertical) */
.edit-form-container {
    flex-grow: 1; /* Ocupa todo o espaço restante abaixo do header */
    overflow-y: auto; /* Habilita SCROLL vertical apenas aqui */
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    opacity: 0;
    transition: opacity 0.2s 0.1s;
    
    /* Estilização da Barra de Rolagem (Firefox) */
    scrollbar-width: thin;
    scrollbar-color: #444 #1a1a1a;
}

.tactical-sidebar-left.open .edit-form-container {
    opacity: 1;
}

/* Estilização da Barra de Rolagem (Webkit/Chrome) */
.edit-form-container::-webkit-scrollbar {
    width: 6px;
}
.edit-form-container::-webkit-scrollbar-track {
    background: #1a1a1a;
}
.edit-form-container::-webkit-scrollbar-thumb {
    background-color: #444;
    border-radius: 3px;
}
/* --- Componentes do Formulário --- */

/* 1. Seletores de Tipo (Botões Grandes) */
.type-selector-group {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.type-btn {
    flex: 1;
    padding: 10px;
    border: 1px solid #444;
    background: #222;
    color: #888;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    transition: all 0.2s;
}

.type-btn i { font-size: 1.2rem; }
.type-btn span { font-size: 0.7rem; font-weight: bold; text-transform: uppercase; }

/* Estados Ativos (Cores Específicas) */
.type-btn.active.t-drink { background: rgba(0, 188, 212, 0.2); border-color: #00bcd4; color: #00bcd4; }
.type-btn.active.t-feed { background: rgba(76, 175, 80, 0.2); border-color: #4caf50; color: #4caf50; }
.type-btn.active.t-rest { background: rgba(255, 152, 0, 0.2); border-color: #ff9800; color: #ff9800; }

/* 2. Toggle Rebanho/Solo */
.toggle-group {
    background: #222;
    border-radius: 6px;
    padding: 4px;
    display: flex;
    border: 1px solid #333;
}

.toggle-opt {
    flex: 1;
    text-align: center;
    padding: 8px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 0.8rem;
    color: #666;
    transition: all 0.2s;
}

.toggle-opt.active {
    background: #333;
    color: #fff;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* 3. Inputs Padrão */
.edit-label {
    font-size: 0.75rem;
    color: #888;
    margin-bottom: 5px;
    display: block;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.edit-input {
    width: 100%;
    background: #111;
    border: 1px solid #333;
    color: #fff;
    padding: 10px;
    border-radius: 4px;
    font-size: 0.9rem;
}

.edit-input:focus { border-color: var(--primary-color); outline: none; }

/* 4. Checkbox Estilizado */
.checkbox-row {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    user-select: none;
}

.custom-check {
    width: 18px;
    height: 18px;
    border: 2px solid #555;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.checkbox-row.checked .custom-check {
    background: var(--primary-color);
    border-color: var(--primary-color);
}

.custom-check i { font-size: 10px; color: #000; display: none; }
.checkbox-row.checked .custom-check i { display: block; }

/* 5. Ações (Footer) */
.edit-actions {
    margin-top: auto; /* Empurra para baixo */
    display: flex;
    gap: 10px;
    border-top: 1px solid #333;
    padding-top: 20px;
}

.btn-delete-pin {
    width: 100%;
    background: rgba(198, 40, 40, 0.1);
    color: #ef5350;
    border: 1px solid #c62828;
    padding: 10px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.8rem;
    transition: background 0.2s;
}

.btn-delete-pin:hover { background: rgba(198, 40, 40, 0.3); }
/* ==========================================================================
   65. ATUALIZAÇÃO FORMULÁRIO COMPLETO (SIDEBAR)
   ========================================================================== */

/* Grid para Inputs Lado a Lado (ex: Machos/Fêmeas) */
.form-row-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

/* Slider de Tamanho */
.range-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

.range-input {
    flex-grow: 1;
    -webkit-appearance: none;
    height: 4px;
    background: #333;
    border-radius: 2px;
    outline: none;
}

.range-input::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background: var(--primary-color);
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.2s;
}

.range-input::-webkit-slider-thumb:hover { transform: scale(1.2); }

.range-value {
    font-size: 0.8rem;
    color: var(--primary-color);
    width: 30px;
    text-align: right;
}

/* Área de Texto (Notas) */
.edit-textarea {
    width: 100%;
    background: #111;
    border: 1px solid #333;
    color: #ccc;
    padding: 10px;
    border-radius: 4px;
    font-family: inherit;
    font-size: 0.85rem;
    resize: vertical;
    min-height: 60px;
}
.edit-textarea:focus { border-color: var(--primary-color); outline: none; }

/* Ajuste para garantir que o último elemento não fique colado na borda ao rolar */
.action-buttons-container {
    margin-top: auto;
    padding-bottom: 20px; /* Espaço extra no final da rolagem */
}

.btn-save-pin {
    flex: 2; /* Ocupa mais espaço */
    background: var(--primary-color);
    color: #000;
    border: none;
    padding: 12px;
    border-radius: 6px;
    font-weight: bold;
    text-transform: uppercase;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: opacity 0.2s;
}
.btn-save-pin:hover { opacity: 0.9; }

.btn-delete-icon {
    flex: 0 0 50px; /* Largura fixa quadrada */
    background: rgba(198, 40, 40, 0.1);
    border: 1px solid #c62828;
    color: #ef5350;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    transition: all 0.2s;
}
.btn-delete-icon:hover { background: #c62828; color: #fff; }

/* ==========================================================================
   66. CORREÇÃO FINAL DOS BOTÕES DE AÇÃO (SIDEBAR)
   ========================================================================== */

/* Container Flex para alinhar os botões lado a lado */
.action-buttons-container {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between;
    gap: 12px;
    margin-top: auto; /* Empurra para o fundo da sidebar */
    padding-top: 20px;
    padding-bottom: 10px;
    border-top: 1px solid #333;
    width: 100%;
}

/* Botão SALVAR (Largo) */
.btn-save-pin {
    flex: 1; /* Ocupa todo o espaço disponível */
    height: 45px; /* Altura fixa para garantir alinhamento */
    background: var(--primary-color);
    color: #000;
    border: none;
    border-radius: 6px;
    font-family: var(--font-headings, sans-serif);
    font-weight: 700;
    font-size: 0.9rem;
    text-transform: uppercase;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    white-space: nowrap; /* Impede que o texto quebre */
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    transition: transform 0.1s, opacity 0.2s;
}

.btn-save-pin:hover {
    opacity: 0.9;
}

.btn-save-pin:active {
    transform: scale(0.98);
}

/* Botão EXCLUIR (Quadrado/Ícone) */
.btn-delete-icon {
    flex: 0 0 45px; /* Largura fixa igual à altura (Quadrado) */
    height: 45px;
    background: rgba(198, 40, 40, 0.15);
    border: 1px solid #c62828;
    color: #ff5252;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: all 0.2s;
}

.btn-delete-icon:hover {
    background: #c62828;
    color: #fff;
    box-shadow: 0 0 10px rgba(198, 40, 40, 0.4);
}

/* ==========================================================================
   67. TOOLTIP DE INFORMAÇÕES DO PINO (HOVER)
   ========================================================================== */

.zm-tooltip {
    position: absolute;
    background: rgba(15, 17, 19, 0.95); /* Fundo quase preto e opaco */
    border: 1px solid #333;
    border-left: 4px solid #333; /* Borda colorida dinâmica na esquerda */
    border-radius: 6px;
    padding: 10px;
    width: 220px;
    z-index: 1000; /* Acima de tudo */
    pointer-events: none; /* Mouse ignora o tooltip (evita flicker) */
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    transform: translateY(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    font-family: var(--font-text, sans-serif);
    display: none; /* Escondido por padrão */
}

.zm-tooltip.visible {
    opacity: 1;
    transform: translateY(0);
    display: block;
}

/* Cores da Borda Lateral baseadas no Tipo */
.zm-tooltip.type-drink { border-left-color: #00bcd4; }
.zm-tooltip.type-feed { border-left-color: #4caf50; }
.zm-tooltip.type-rest { border-left-color: #ff9800; }

/* Estrutura Interna */
.tt-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    margin-bottom: 8px;
}

.tt-title {
    color: #fff;
    font-weight: bold;
    font-size: 0.9rem;
    text-transform: uppercase;
}

.tt-icon { font-size: 1rem; }
.type-drink .tt-icon { color: #00bcd4; }
.type-feed .tt-icon { color: #4caf50; }
.type-rest .tt-icon { color: #ff9800; }

.tt-body {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.tt-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: #ccc;
}

.tt-row span:first-child { color: #888; margin-right: 5px; }

.tt-stats {
    display: flex;
    gap: 15px;
    margin-top: 5px;
    background: rgba(255,255,255,0.05);
    padding: 5px;
    border-radius: 4px;
    justify-content: center;
}

.tt-stat-item { font-size: 0.8rem; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 5px; }
.tt-stat-item i { font-size: 0.7rem; }
.tt-stat-item.male i { color: #42a5f5; }
.tt-stat-item.female i { color: #ec407a; }

.tt-notes {
    margin-top: 8px;
    font-size: 0.75rem;
    color: #aaa;
    font-style: italic;
    border-top: 1px solid rgba(255,255,255,0.05);
    padding-top: 5px;
    line-height: 1.3;
}

/* Tag de Prioridade */
.tt-badge {
    font-size: 0.65rem;
    padding: 2px 6px;
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: bold;
}
.tt-badge.main { background: rgba(0, 188, 212, 0.2); color: #00bcd4; }
.tt-badge.sec { background: rgba(158, 158, 158, 0.2); color: #999; }


/* ==========================================================================
   69. TEXTO NO MAPA & BOTÃO FLUTUANTE & ACCORDION (CORRIGIDO FINAL)
   ========================================================================== */

/* --- 1. TEXTO NO MAPA (LIMPO - SEM CAIXA) --- */
.zm-text-element {
    position: absolute;
    transform: translate(-50%, -50%);
    cursor: grab;
    white-space: nowrap;
    user-select: none;
    line-height: 1;
    z-index: 140;
    font-family: var(--font-text, sans-serif);
    
    /* Sombra padrão para leitura */
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
    
    /* REMOVIDO: Bordas e fundos para visual limpo */
    border: none !important;
    background: transparent !important; 
    box-shadow: none !important;
    padding: 2px 4px;
    transition: text-shadow 0.2s, transform 0.2s;
}

.zm-text-element:hover {
    /* Feedback sutil: aumenta o brilho do texto */
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
}

.zm-text-element.selected {
    /* SELEÇÃO LIMPA: Apenas Glow no texto, sem quadrado */
    /* Cria um brilho na cor do tema ao redor das letras */
    text-shadow: 
        0 0 5px var(--primary-color), 
        0 0 10px var(--primary-color),
        0 2px 4px #000;
        
    z-index: 160;
    transform: translate(-50%, -50%) scale(1.1); /* Leve aumento para indicar foco */
    border: none !important; /* Garante que nenhuma borda apareça */
}


/* --- 2. BOTÃO FLUTUANTE (FAB) - CRESCIMENTO PARA CIMA --- */
.map-fab-container {
    position: absolute;
    bottom: 120px; /* Posição base acima do zoom */
    right: 20px;
    z-index: 500;
    
    /* CORREÇÃO: Usa column normal. 
       No HTML: Options vem antes do Main Button.
       Visualmente: Options ficam no TOPO, Button fica embaixo. */
    display: flex; 
    flex-direction: column; 
    align-items: center;
    gap: 15px; 
}

.fab-main-btn {
    width: 50px; 
    height: 50px;
    border-radius: 50%;
    background: var(--primary-color);
    color: #000;
    border: none;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    font-size: 1.4rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), background 0.2s;
    z-index: 2; 
    /* Ordem visual: Força ele a ser o último (fundo) caso o flex bugue, 
       mas a estrutura HTML + Flex Column já garante isso nativamente. */
    order: 2; 
}

.fab-main-btn:hover { transform: scale(1.1); background: #fff; }
.fab-main-btn.active { transform: rotate(45deg); background: #fff; }

.fab-options {
    /* Container das opções */
    display: flex;
    flex-direction: column; /* Pilha normal: Item 1 no topo, Item 2 abaixo dele */
    gap: 12px;
    order: 1; /* Força ficar ACIMA do botão principal */
    
    /* Animação: Começa invisível e 'caída' para baixo (escondida atrás do botão principal) */
    opacity: 0;
    pointer-events: none;
    transform: translateY(20px); 
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-bottom: 5px; /* Espaço extra antes do botão principal */
}

.map-fab-container.open .fab-options {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0); /* Sobe para posição original */
}

.fab-opt-btn {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: #222;
    color: #fff;
    border: 1px solid #444;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    box-shadow: 0 3px 8px rgba(0,0,0,0.4);
    position: relative;
    transition: transform 0.2s, background 0.2s;
}
.fab-opt-btn:hover { background: var(--primary-color); color: #000; transform: scale(1.1); }

/* Tooltip do FAB (Texto à esquerda) */
.fab-opt-btn::after {
    content: attr(data-tooltip);
    position: absolute;
    right: 55px; 
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.85);
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}
.fab-opt-btn:hover::after { opacity: 1; }


/* --- 3. ACCORDION (DICAS) --- */
.accordion-item {
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.accordion-header {
    padding: 12px 0;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #ccc;
    font-weight: 600;
    font-size: 0.9rem;
    transition: color 0.2s;
}

.accordion-header:hover { color: var(--primary-color); }
.accordion-header.active { color: #fff; }
.accordion-header i { font-size: 0.8rem; transition: transform 0.3s; }
.accordion-header.active i { transform: rotate(180deg); }

.accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    padding: 0 5px;
}
.accordion-content.open {
    padding-bottom: 15px;
}

/* --- 4. EDITOR DE TEXTO (SIDEBAR) --- */
.color-picker-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin-top: 10px;
}

.color-dot {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid transparent;
    transition: transform 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}
.color-dot:hover { transform: scale(1.15); }
.color-dot.active { border-color: #fff; transform: scale(1.1); box-shadow: 0 0 8px rgba(255,255,255,0.4); }
/* ==========================================================================
   70. BOTÃO DE REABRIR DICAS (TOGGLE SIDEBAR)
   ========================================================================== */

.btn-reopen-tips {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    
    background: #1a1a1a;
    border: 1px solid #333;
    color: #ccc;
    border-radius: 6px;
    
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.1rem;
    
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    z-index: 400; /* Acima do mapa, mas abaixo de modais */
    
    opacity: 0; /* Invisível por padrão (quando sidebar está aberta) */
    pointer-events: none;
    transform: translateX(20px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Quando visível (Sidebar fechada) */
.btn-reopen-tips.visible {
    opacity: 1;
    pointer-events: auto;
    transform: translateX(0);
}

.btn-reopen-tips:hover {
    background: var(--primary-color);
    color: #000;
    border-color: var(--primary-color);
}
/* ==========================================================================
   71. FORMAS TÁTICAS (SHAPES LAYER)
   ========================================================================== */

/* Camada SVG que fica entre o mapa e os pinos */
.zm-draw-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 50; /* Acima da imagem, abaixo dos pinos */
    pointer-events: none; /* Deixa passar cliques para o mapa (pan) */
    overflow: visible;
}

/* Estilo base das Formas */
.zm-shape {
    cursor: grab;
    pointer-events: all; /* A forma captura o clique para arrastar */
    transition: filter 0.2s, stroke-width 0.2s;
    vector-effect: non-scaling-stroke; 
    stroke-linejoin: round;
    stroke-linecap: round;
}

.zm-shape:hover {
    filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
    stroke-opacity: 1 !important;
}

.zm-shape.selected {
    /* CORREÇÃO: Removemos 'stroke: #fff' para respeitar a cor escolhida pelo usuário */
    /* Adicionamos um brilho branco externo para destacar a seleção sem mudar a cor da linha */
    filter: drop-shadow(0 0 5px #fff) drop-shadow(0 0 10px var(--primary-color));
    
    /* Removemos o !important do width para deixar o JS controlar a espessura */
    stroke-opacity: 1 !important;
}
.zm-shape.is-dragging {
    cursor: grabbing;
    opacity: 0.8;
}

/* Botões de Tipo de Forma na Sidebar */
.shape-btn-group {
    display: flex;
    gap: 8px;
    margin-bottom: 15px;
}

.shape-btn {
    flex: 1;
    background: #222;
    border: 1px solid #444;
    color: #888;
    height: 40px;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: all 0.2s;
}

.shape-btn:hover { background: #333; color: #fff; }
.shape-btn.active { background: var(--primary-color); color: #000; border-color: var(--primary-color); }
/* ==========================================================================
   45. VISUALIZAÇÃO DE PINOS - ESTILO CÍRCULO TÁTICO (CORREÇÃO FINAL)
   ========================================================================== */

/* 1. LIMPEZA TOTAL (Remove estilos fantasmas antigos) */
.zm-pin::after, .zm-pin::before,
.pin-head::after, .pin-head::before,
.prio-main::after, .pin-priority-main::after {
    content: none !important;
    display: none !important;
    border: none !important;
    animation: none !important;
    background: none !important;
}

/* 2. CONTAINER DO PINO - CORRIGIDO: Adicionado tamanho e centralização real */
.zm-pin {
    position: absolute;
    width: 44px; /* Largura base para o contexto flex */
    height: 44px;
    /* CORREÇÃO CRÍTICA: translate(-50%, -50%) garante que o CENTRO do pino esteja na coordenada */
    transform: translate(-50%, -50%) scale(var(--pin-scale, 1));
    z-index: 100;
    cursor: pointer;
    
    display: flex;
    flex-direction: column;
    align-items: center;      
    justify-content: center;
    
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
    transition: z-index 0.2s;
}

/* Hover: Traz o pino para frente */
.zm-pin:hover { z-index: 2000; }
.zm-pin:hover .pin-head { transform: scale(1.1); border-color: #fff; }

/* 3. CABEÇA DO PINO - CORRIGIDO: Adicionado flex-shrink e aspect-ratio para evitar distorção */
.pin-head {
    width: 44px; 
    height: 44px;
    flex-shrink: 0; /* IMPEDE A DISTORÇÃO: Não permite que o flexbox "esmague" o círculo */
    aspect-ratio: 1 / 1; /* Garante que largura e altura sejam sempre iguais (círculo perfeito) */
    
    border-radius: 50%; 
    border: 2px solid rgba(255,255,255,0.9);
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    box-shadow: 0 4px 10px rgba(0,0,0,0.6);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    
    position: relative;
    margin-bottom: 5px; 
}

/* Ícone dentro do círculo */
.pin-head i {
    font-size: 20px;
    color: #fff;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));
    z-index: 2;
    transform: none !important; /* Garante que o ícone fique reto */
}

/* --- ESTILOS POR TIPO --- */

/* TIPO 1: BEBIDA (Círculo Azul) */
.zm-pin.type-drink .pin-head {
    background: linear-gradient(135deg, #00bcd4, #008ba3); /* Ciano */
    border-radius: 50%; /* Garante círculo */
}
.zm-pin.type-drink .pin-head i {
    color: #000; /* Ícone preto para contraste */
}

/* TIPO 2: COMIDA (Círculo Verde) */
.zm-pin.type-feed .pin-head {
    background: linear-gradient(135deg, #66bb6a, #2e7d32); /* Verde */
    border-radius: 50%;
}
.zm-pin.type-feed .pin-head i { color: #fff; }

/* TIPO 3: DESCANSO (Círculo Laranja) */
.zm-pin.type-rest .pin-head {
    background: linear-gradient(135deg, #ffa726, #ff6f00); /* Laranja */
    border-radius: 50%;
}
.zm-pin.type-rest .pin-head i { color: #000; }
/* --- ESTILOS DE PRIORIDADE (NOVO) --- */

/* Zonas Secundárias: Levemente opacas para reduzir o ruído visual e dar foco às principais */
.zm-pin.prio-secondary {
    opacity: 0.6;
}

/* Zonas Principais: Borda mais espessa e brilho intenso na cor do tema */
.zm-pin.prio-main .pin-head {
    border-width: 3px;
    border-color: #fff;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px var(--primary-color);
}

/* Garante que a zona principal fique visualmente acima das secundárias em caso de sobreposição */
.zm-pin.prio-main {
    z-index: 120;
}

/* Ajuste no hover das secundárias para recuperarem opacidade ao passar o mouse */
.zm-pin.prio-secondary:hover {
    opacity: 1;
}
/* 4. SELEÇÃO (Glow) */
.zm-pin.selected .pin-head {
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5), 0 0 25px var(--primary-color);
    border-color: #fff;
}

/* 5. RÓTULO DE NOME (Limpo) */
.zm-pin-label {
    position: absolute;
    top: 48px; /* Fica bem abaixo do círculo */
    
    background: transparent !important;
    border: none !important;
    padding: 0;
    
    color: #fff !important;
    font-family: var(--font-text, sans-serif);
    font-size: 11px !important;
    font-weight: 800 !important;
    text-transform: uppercase;
    white-space: nowrap;
    
    text-shadow: 
        -1px -1px 0 #000, 1px -1px 0 #000, 
        -1px 1px 0 #000, 1px 1px 0 #000,
        0 2px 5px rgba(0,0,0,1);
         
    pointer-events: none;
    z-index: 150;
}

/* 6. CARD DE INFORMAÇÕES (Tooltip Flutuante) */
.pin-info {
    display: none; /* Escondido por padrão */
    position: absolute;
    bottom: 60px; /* Flutua ACIMA do pino */
    left: 50%;
    transform: translateX(-50%);
    
    background: #151515;
    border: 1px solid #444;
    border-left: 4px solid var(--primary-color);
    border-radius: 8px;
    width: 200px;
    padding: 0;
    
    box-shadow: 0 8px 25px rgba(0,0,0,0.8);
    z-index: 5000;
    pointer-events: none;
}

/* Mostra apenas no Hover */
.zm-pin:hover .pin-info {
    display: block;
    animation: fadeInTooltip 0.2s ease-out;
}

@keyframes fadeInTooltip {
    from { opacity: 0; transform: translate(-50%, 10px); }
    to { opacity: 1; transform: translate(-50%, 0); }
}

/* Estilo interno do Card */
.pi-header {
    background: #222;
    padding: 10px;
    border-bottom: 1px solid #333;
    display: flex; justify-content: space-between; align-items: center;
    border-radius: 8px 8px 0 0;
}
.pi-type { font-size: 0.75rem; color: var(--primary-color); font-weight: bold; text-transform: uppercase; }
.pi-badge { background: #333; color: #fff; font-size: 0.65rem; padding: 2px 6px; border-radius: 4px; }

.pi-body { padding: 10px; }
.pi-stats-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 8px;
    margin-top: 5px;
}
.pi-stat-box {
    background: rgba(255,255,255,0.05);
    padding: 6px;
    border-radius: 4px;
    font-size: 0.8rem; color: #ccc;
    display: flex; align-items: center; justify-content: center; gap: 6px;
}
.pi-stat-box.male i { color: #42a5f5; }
.pi-stat-box.female i { color: #ec407a; }

/* 7. CONTROLES DE ZOOM (Fixo no canto) */
.map-zoom-controls {
    position: absolute !important;
    bottom: 20px !important;
    right: 20px !important;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 500;
}
.zoom-btn {
    width: 40px; height: 40px;
    background: #111; color: #fff;
    border: 1px solid #333; border-radius: 8px;
    font-size: 1.2rem; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
.zoom-btn:hover { background: var(--primary-color); color: #000; }